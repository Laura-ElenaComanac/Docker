{"ast":null,"code":"import _objectSpread from\"/Users/laura-elena.olaru/Downloads/FinalDocker/my-ionic-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/laura-elena.olaru/Downloads/FinalDocker/my-ionic-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{Redirect}from'react-router-dom';import{IonButton,IonContent,IonHeader,IonInput,IonLoading,IonPage,IonTitle,IonToolbar}from'@ionic/react';import{AuthContext}from'./AuthProvider';import{getLogger}from'../core';var log=getLogger('Login');export var Login=function Login(_ref){var history=_ref.history;var _useContext=useContext(AuthContext),isAuthenticated=_useContext.isAuthenticated,isAuthenticating=_useContext.isAuthenticating,login=_useContext.login,authenticationError=_useContext.authenticationError;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var username=state.username,password=state.password;var handleLogin=function handleLogin(){log('handleLogin...');login===null||login===void 0?void 0:login(username,password);};log('render');if(isAuthenticated){return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/'}});}return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonTitle,null,\"Login\"))),/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(IonInput,{placeholder:\"Username\",value:username,onIonChange:function onIonChange(e){return setState(_objectSpread(_objectSpread({},state),{},{username:e.detail.value||''}));}}),/*#__PURE__*/React.createElement(IonInput,{placeholder:\"Password\",value:password,onIonChange:function onIonChange(e){return setState(_objectSpread(_objectSpread({},state),{},{password:e.detail.value||''}));}}),/*#__PURE__*/React.createElement(IonLoading,{isOpen:isAuthenticating}),authenticationError&&/*#__PURE__*/React.createElement(\"div\",null,authenticationError.message||'Failed to authenticate'),/*#__PURE__*/React.createElement(IonButton,{onClick:handleLogin},\"Login\")));};","map":{"version":3,"sources":["/Users/laura-elena.olaru/Downloads/FinalDocker/my-ionic-app/src/auth/Login.tsx"],"names":["React","useContext","useState","Redirect","IonButton","IonContent","IonHeader","IonInput","IonLoading","IonPage","IonTitle","IonToolbar","AuthContext","getLogger","log","Login","history","isAuthenticated","isAuthenticating","login","authenticationError","state","setState","username","password","handleLogin","pathname","e","detail","value","message"],"mappings":"mWAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,QAA5B,KAA4C,OAA5C,CACA,OAASC,QAAT,KAAyB,kBAAzB,CAEA,OAASC,SAAT,CAAoBC,UAApB,CAAgCC,SAAhC,CAA2CC,QAA3C,CAAqDC,UAArD,CAAiEC,OAAjE,CAA0EC,QAA1E,CAAoFC,UAApF,KAAsG,cAAtG,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,OAASC,SAAT,KAA0B,SAA1B,CAEA,GAAMC,CAAAA,GAAG,CAAGD,SAAS,CAAC,OAAD,CAArB,CAOA,MAAO,IAAME,CAAAA,KAAoC,CAAG,QAAvCA,CAAAA,KAAuC,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,iBACOf,UAAU,CAACW,WAAD,CADjB,CAC3DK,eAD2D,aAC3DA,eAD2D,CAC1CC,gBAD0C,aAC1CA,gBAD0C,CACxBC,KADwB,aACxBA,KADwB,CACjBC,mBADiB,aACjBA,mBADiB,eAEzClB,QAAQ,CAAa,EAAb,CAFiC,wCAE5DmB,KAF4D,eAErDC,QAFqD,kBAG3DC,CAAAA,QAH2D,CAGpCF,KAHoC,CAG3DE,QAH2D,CAGjDC,QAHiD,CAGpCH,KAHoC,CAGjDG,QAHiD,CAInE,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBX,GAAG,CAAC,gBAAD,CAAH,CACAK,KAAK,OAAL,EAAAA,KAAK,SAAL,QAAAA,KAAK,CAAGI,QAAH,CAAaC,QAAb,CAAL,CACD,CAHD,CAIAV,GAAG,CAAC,QAAD,CAAH,CACA,GAAIG,eAAJ,CAAqB,CACnB,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAE,CAAES,QAAQ,CAAE,GAAZ,CAAd,EAAP,CACD,CACD,mBACE,oBAAC,OAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,UAAD,mBACE,oBAAC,QAAD,cADF,CADF,CADF,cAME,oBAAC,UAAD,mBACE,oBAAC,QAAD,EACE,WAAW,CAAC,UADd,CAEE,KAAK,CAAEH,QAFT,CAGE,WAAW,CAAE,qBAAAI,CAAC,QAAIL,CAAAA,QAAQ,gCACrBD,KADqB,MAExBE,QAAQ,CAAEI,CAAC,CAACC,MAAF,CAASC,KAAT,EAAkB,EAFJ,GAAZ,EAHhB,EADF,cAQE,oBAAC,QAAD,EACE,WAAW,CAAC,UADd,CAEE,KAAK,CAAEL,QAFT,CAGE,WAAW,CAAE,qBAAAG,CAAC,QAAIL,CAAAA,QAAQ,gCACrBD,KADqB,MAExBG,QAAQ,CAAEG,CAAC,CAACC,MAAF,CAASC,KAAT,EAAkB,EAFJ,GAAZ,EAHhB,EARF,cAeE,oBAAC,UAAD,EAAY,MAAM,CAAEX,gBAApB,EAfF,CAgBGE,mBAAmB,eAClB,+BAAMA,mBAAmB,CAACU,OAApB,EAA+B,wBAArC,CAjBJ,cAmBE,oBAAC,SAAD,EAAW,OAAO,CAAEL,WAApB,UAnBF,CANF,CADF,CA8BD,CA1CM","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { RouteComponentProps } from 'react-router';\nimport { IonButton, IonContent, IonHeader, IonInput, IonLoading, IonPage, IonTitle, IonToolbar } from '@ionic/react';\nimport { AuthContext } from './AuthProvider';\nimport { getLogger } from '../core';\n\nconst log = getLogger('Login');\n\ninterface LoginState {\n  username?: string;\n  password?: string;\n}\n\nexport const Login: React.FC<RouteComponentProps> = ({ history }) => {\n  const { isAuthenticated, isAuthenticating, login, authenticationError } = useContext(AuthContext);\n  const [state, setState] = useState<LoginState>({});\n  const { username, password } = state;\n  const handleLogin = () => {\n    log('handleLogin...');\n    login?.(username, password);\n  };\n  log('render');\n  if (isAuthenticated) {\n    return <Redirect to={{ pathname: '/' }} />\n  }\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Login</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <IonInput\n          placeholder=\"Username\"\n          value={username}\n          onIonChange={e => setState({\n            ...state,\n            username: e.detail.value || ''\n          })}/>\n        <IonInput\n          placeholder=\"Password\"\n          value={password}\n          onIonChange={e => setState({\n            ...state,\n            password: e.detail.value || ''\n          })}/>\n        <IonLoading isOpen={isAuthenticating}/>\n        {authenticationError && (\n          <div>{authenticationError.message || 'Failed to authenticate'}</div>\n        )}\n        <IonButton onClick={handleLogin}>Login</IonButton>\n      </IonContent>\n    </IonPage>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}