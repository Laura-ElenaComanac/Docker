{"ast":null,"code":"import _objectSpread from\"/Users/laura-elena.olaru/Downloads/FinalDocker/my-ionic-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/laura-elena.olaru/Downloads/FinalDocker/my-ionic-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{IonButton,IonButtons,IonContent,IonHeader,IonInput,IonLoading,IonPage,IonTitle,IonToolbar}from'@ionic/react';import{getLogger}from'../core';import{ItemContext}from'./ItemProvider';var log=getLogger('ItemEdit');var ItemEdit=function ItemEdit(_ref){var history=_ref.history,match=_ref.match;var _useContext=useContext(ItemContext),items=_useContext.items,saving=_useContext.saving,savingError=_useContext.savingError,saveItem=_useContext.saveItem;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),item=_useState4[0],setItem=_useState4[1];useEffect(function(){log('useEffect');var routeId=match.params.id||'';var item=items===null||items===void 0?void 0:items.find(function(it){return it._id===routeId;});setItem(item);if(item){setText(item.text);}},[match.params.id,items]);var handleSave=function handleSave(){var editedItem=item?_objectSpread(_objectSpread({},item),{},{text:text}):{text:text};saveItem&&saveItem(editedItem).then(function(){return history.goBack();});};log('render');return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonTitle,null,\"Edit\"),/*#__PURE__*/React.createElement(IonButtons,{slot:\"end\"},/*#__PURE__*/React.createElement(IonButton,{onClick:handleSave},\"Save\")))),/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(IonInput,{value:text,onIonChange:function onIonChange(e){return setText(e.detail.value||'');}}),/*#__PURE__*/React.createElement(IonLoading,{isOpen:saving}),savingError&&/*#__PURE__*/React.createElement(\"div\",null,savingError.message||'Failed to save item')));};export default ItemEdit;","map":{"version":3,"sources":["/Users/laura-elena.olaru/Downloads/FinalDocker/my-ionic-app/src/todo/ItemEdit.tsx"],"names":["React","useContext","useEffect","useState","IonButton","IonButtons","IonContent","IonHeader","IonInput","IonLoading","IonPage","IonTitle","IonToolbar","getLogger","ItemContext","log","ItemEdit","history","match","items","saving","savingError","saveItem","text","setText","item","setItem","routeId","params","id","find","it","_id","handleSave","editedItem","then","goBack","e","detail","value","message"],"mappings":"mWAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,OACEC,SADF,CAEEC,UAFF,CAGEC,UAHF,CAIEC,SAJF,CAKEC,QALF,CAMEC,UANF,CAOEC,OAPF,CAQEC,QARF,CASEC,UATF,KAUO,cAVP,CAWA,OAASC,SAAT,KAA0B,SAA1B,CACA,OAASC,WAAT,KAA4B,gBAA5B,CAIA,GAAMC,CAAAA,GAAG,CAAGF,SAAS,CAAC,UAAD,CAArB,CAMA,GAAMG,CAAAA,QAAiC,CAAG,QAApCA,CAAAA,QAAoC,MAAwB,IAArBC,CAAAA,OAAqB,MAArBA,OAAqB,CAAZC,KAAY,MAAZA,KAAY,iBACfjB,UAAU,CAACa,WAAD,CADK,CACxDK,KADwD,aACxDA,KADwD,CACjDC,MADiD,aACjDA,MADiD,CACzCC,WADyC,aACzCA,WADyC,CAC5BC,QAD4B,aAC5BA,QAD4B,eAExCnB,QAAQ,CAAC,EAAD,CAFgC,wCAEzDoB,IAFyD,eAEnDC,OAFmD,8BAGxCrB,QAAQ,EAHgC,yCAGzDsB,IAHyD,eAGnDC,OAHmD,eAIhExB,SAAS,CAAC,UAAM,CACda,GAAG,CAAC,WAAD,CAAH,CACA,GAAMY,CAAAA,OAAO,CAAGT,KAAK,CAACU,MAAN,CAAaC,EAAb,EAAmB,EAAnC,CACA,GAAMJ,CAAAA,IAAI,CAAGN,KAAH,SAAGA,KAAH,iBAAGA,KAAK,CAAEW,IAAP,CAAY,SAAAC,EAAE,QAAIA,CAAAA,EAAE,CAACC,GAAH,GAAWL,OAAf,EAAd,CAAb,CACAD,OAAO,CAACD,IAAD,CAAP,CACA,GAAIA,IAAJ,CAAU,CACRD,OAAO,CAACC,IAAI,CAACF,IAAN,CAAP,CACD,CACF,CARQ,CAQN,CAACL,KAAK,CAACU,MAAN,CAAaC,EAAd,CAAkBV,KAAlB,CARM,CAAT,CASA,GAAMc,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,GAAMC,CAAAA,UAAU,CAAGT,IAAI,gCAAQA,IAAR,MAAcF,IAAI,CAAJA,IAAd,GAAuB,CAAEA,IAAI,CAAJA,IAAF,CAA9C,CACAD,QAAQ,EAAIA,QAAQ,CAACY,UAAD,CAAR,CAAqBC,IAArB,CAA0B,iBAAMlB,CAAAA,OAAO,CAACmB,MAAR,EAAN,EAA1B,CAAZ,CACD,CAHD,CAIArB,GAAG,CAAC,QAAD,CAAH,CACA,mBACE,oBAAC,OAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,UAAD,mBACE,oBAAC,QAAD,aADF,cAEE,oBAAC,UAAD,EAAY,IAAI,CAAC,KAAjB,eACE,oBAAC,SAAD,EAAW,OAAO,CAAEkB,UAApB,SADF,CAFF,CADF,CADF,cAWE,oBAAC,UAAD,mBACE,oBAAC,QAAD,EAAU,KAAK,CAAEV,IAAjB,CAAuB,WAAW,CAAE,qBAAAc,CAAC,QAAIb,CAAAA,OAAO,CAACa,CAAC,CAACC,MAAF,CAASC,KAAT,EAAkB,EAAnB,CAAX,EAArC,EADF,cAEE,oBAAC,UAAD,EAAY,MAAM,CAAEnB,MAApB,EAFF,CAGGC,WAAW,eACV,+BAAMA,WAAW,CAACmB,OAAZ,EAAuB,qBAA7B,CAJJ,CAXF,CADF,CAqBD,CAvCD,CAyCA,cAAexB,CAAAA,QAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport {\n  IonButton,\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonInput,\n  IonLoading,\n  IonPage,\n  IonTitle,\n  IonToolbar\n} from '@ionic/react';\nimport { getLogger } from '../core';\nimport { ItemContext } from './ItemProvider';\nimport { RouteComponentProps } from 'react-router';\nimport { ItemProps } from './ItemProps';\n\nconst log = getLogger('ItemEdit');\n\ninterface ItemEditProps extends RouteComponentProps<{\n  id?: string;\n}> {}\n\nconst ItemEdit: React.FC<ItemEditProps> = ({ history, match }) => {\n  const { items, saving, savingError, saveItem } = useContext(ItemContext);\n  const [text, setText] = useState('');\n  const [item, setItem] = useState<ItemProps>();\n  useEffect(() => {\n    log('useEffect');\n    const routeId = match.params.id || '';\n    const item = items?.find(it => it._id === routeId);\n    setItem(item);\n    if (item) {\n      setText(item.text);\n    }\n  }, [match.params.id, items]);\n  const handleSave = () => {\n    const editedItem = item ? { ...item, text } : { text };\n    saveItem && saveItem(editedItem).then(() => history.goBack());\n  };\n  log('render');\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Edit</IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={handleSave}>\n              Save\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <IonInput value={text} onIonChange={e => setText(e.detail.value || '')} />\n        <IonLoading isOpen={saving} />\n        {savingError && (\n          <div>{savingError.message || 'Failed to save item'}</div>\n        )}\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default ItemEdit;\n"]},"metadata":{},"sourceType":"module"}